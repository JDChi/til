# Netfilter

Netfilter 框架主要是一套在内核中用于干预数据在协议栈中流转的过滤器框架。

它围绕网络层的周围，埋下了五个 Hooks，只要数据包流到网络层，经过这些 Hooks 时，就会触发相应的回调。

这个五个 Hooks 分别是：
- PREROUTING：
  - 数据包进入协议栈后触发
  - 一般用于目标网络地址转换（DNAT）
- INPUT：
  - 确定报文是发往本机的时候触发
  - 一般用于加工发往本地进程的数据包
- FORWARD
  - 确定报文不是发往本机的时候触发
  - 一般用于处理转发到其它机器的数据包
- OUTPUT
  - 从本机程序发出的数据包，在经过 IP 路由前触发
  - 一般用于加工本地进程的输出数据包
- POSTROUTING
  - 从本机网卡出去的数据包会触发
  - 一般用于源网络地址转换（SNAT）
