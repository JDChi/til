# map 的内存泄漏

假如我们对一个 map 增加 100 万个元素，然后再进行全部删除，如果在对 map 还在引用的情况下，实际的堆大小并不会因为所有元素被删除后，而被回收。

这是 map 的设计所致，它只会增不会减。一旦之前由于元素的增加导致桶的数量增加，那么后面就一直维持着了。

有几种解决方法：
- 重启程序
- 每过一段时间，创建 map 的副本，丢掉原 map，但就会在 GC 之前，会有一段时间里是有两份内存。
- 改成用指针来处理 value